language: java
install: true
sudo: true
addons:
  apt:
    packages:
    - oracle-java8-installer
    - oracle-java8-set-default

stages:

- name: build

- name: publish_gh
  if: branch = master AND type IN (push)

jobs:
  include:

  - stage: build
    script: "./gradlew --stacktrace build"

  - stage: publish_gh
    script: "cd coderadar-server/coderadar-core && ../../gradlew --console=plain clean preparePages && ../../gradlew gitPublishPush --stacktrace"
#   - "../../gradlew bintrayUpload --stacktrace"

