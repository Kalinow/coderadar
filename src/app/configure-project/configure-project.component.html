<app-header [title]="'Configure project'"></app-header>
<main>
  <div class="grid-container">
        <div fxLayout="row" fxLayoutAlign="center center" style="margin-top: 2%">
        <form (ngSubmit)="submitForm()">
          <mat-card style="width: 400px">
            <mat-card-header style="justify-content: center">
              <mat-card-title style="font-size: 20pt">Configure {{projectName}}</mat-card-title>
            </mat-card-header>
            <mat-label>Select analyzers:</mat-label>
            <div>&nbsp;</div>
            <mat-card-content fxLayout="column">
              <div *ngFor="let analyzer of analyzers">
                <mat-checkbox name="analyzer-{{analyzer.analyzerName}}" [(ngModel)]="analyzer.enabled">{{formatAnalyzerName(analyzer.analyzerName)}}</mat-checkbox>
              </div>
              <div>&nbsp;</div>
              <mat-label>Included file patterns:</mat-label>
              <div>&nbsp;</div>

              <div *ngFor="let pattern of filePatterns">
                <div *ngIf="pattern.inclusionType === 'INCLUDE'">
                  {{pattern.pattern}}
                </div>
              </div>
              <div>&nbsp;</div>
              <div class="row">
                <mat-form-field style="width: 80%">
                  <input  style="position: static;" type="text" matInput name="includePatterns" placeholder="Included file patterns" [(ngModel)]="filePatternIncludeInput">
                </mat-form-field>
                <button type="button"  mat-button style="float:right" (click)="addToIncludedPatterns()">+</button>
              </div>

              <mat-label>Excluded file patterns: </mat-label>
              <div>&nbsp;</div>
              <div *ngFor="let pattern of filePatterns">
                <div *ngIf="pattern.inclusionType === 'EXCLUDE'">
                  {{pattern.pattern}}
                </div>
              </div>
              <div>&nbsp;</div>
              <div class="row">
                <mat-form-field style="width: 80%">
                  <input  style="position: static;" type="text" matInput name="excludePatterns" placeholder="Excluded file patterns" [(ngModel)]="filePatternExcludeInput">
                </mat-form-field>
                <button type="button" mat-button style="float:right" (click)="addToExcludedPatterns()">+</button>
              </div>

              <mat-label>Project modules: </mat-label>
              <div>&nbsp;</div>
              <div *ngFor="let module of modules">
                {{module}}
              </div>
              <div>&nbsp;</div>
              <div class="row">
                <mat-form-field style="width: 80%">
                  <input  style="position: static;" type="text" matInput name="modules" placeholder="Project modules" [(ngModel)]="modulesInput">
                </mat-form-field>
                <button type="button" mat-button style="float:right" (click)="modules.push(modulesInput)">+</button>
              </div>
              <mat-checkbox name="analyzer" [(ngModel)]="startScan">Start analyzing job</mat-checkbox>
              <mat-error *ngIf="noAnalyzersForJob">Please select at least one analyzer to start an analyzing job.</mat-error>
              <div align="center">
                <button mat-stroked-button style="width: 25%; margin: 10px" routerLink="/dashboard">
                  Cancel
                </button>
                <button mat-raised-button color="primary" style="width: 25%; margin: 10px" type="submit">Done</button>
              </div>
            </mat-card-content>
        </mat-card>
      </form>
    </div>
  </div>
</main>
<app-footer>
</app-footer>
